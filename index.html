<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <!-- Theme + site settings bootstrap -->
  <script>
    (function () {
      const set = (k, v) => localStorage.setItem(k, v);
      const get = (k) => localStorage.getItem(k);

      // âœ… Default LIGHT; dark uses #1b1c1e
      window.__siteSettings = {
        branding: {
          theme_default: "light",
          // Accent presets you asked for (index 0 = default)
          palette: ["#000000", "#f80301", "#00ff86", "#3786ec"]
        },
        seo: {
          site_title: "Daniel Forero â€” Web3/AI Marketing & PR",
          site_description:
            "I turn Web3 ideas into real-world businessesâ€”and then make sure the world hears about them."
        }
      };

      // Ensure we have a theme-color meta for mobile address bar
      const themeMeta =
        document.querySelector('meta[name="theme-color"]') ||
        (function () {
          const m = document.createElement("meta");
          m.name = "theme-color";
          document.head.appendChild(m);
          return m;
        })();

      // Utility: choose black/white text for contrast
      function contrastText(hex) {
        const h = hex.replace("#", "");
        const bigint = parseInt(h.length === 3 ? h.split("").map(c=>c+c).join("") : h, 16);
        const r = (bigint >> 16) & 255, g = (bigint >> 8) & 255, b = bigint & 255;
        // WCAG relative luminance
        const [R,G,B] = [r,g,b].map(v => {
          v /= 255;
          return v <= 0.03928 ? v/12.92 : Math.pow((v+0.055)/1.055, 2.4);
        });
        const L = 0.2126*R + 0.7152*G + 0.0722*B;
        return L > 0.5 ? "#000000" : "#ffffff";
      }

      function applyTheme(mode, persist = false) {
        const root = document.documentElement;
        root.classList.remove("light", "dark");
        let finalMode = mode;

        if (mode === "system") {
          finalMode = window.matchMedia("(prefers-color-scheme: dark)").matches
            ? "dark"
            : "light";
        }

        root.dataset.theme = finalMode;
        root.classList.add(finalMode);
        root.style.colorScheme = finalMode;

        // Update meta theme-color to match background
        if (finalMode === "dark") {
          themeMeta.setAttribute("content", "#1b1c1e");
        } else {
          themeMeta.setAttribute("content", "#ffffff");
        }

        if (persist) set("df_theme", mode);

        if (mode === "system") {
          const mq = window.matchMedia("(prefers-color-scheme: dark)");
          if (!window.__dfSysListenerAttached) {
            mq.addEventListener("change", () => applyTheme("system", false));
            window.__dfSysListenerAttached = true;
          }
        }
      }

      // ðŸ”‘ Single source of truth for accent â†’ updates all tokens
      function applyAccent(hex, persist = false) {
        const style = document.documentElement.style;
        const on = contrastText(hex);

        // Core accent vars
        style.setProperty("--accent", hex);
        style.setProperty("--accent-contrast", on);

        // Tie Material-like tokens to accent so the whole UI follows
        style.setProperty("--md-sys-color-primary", hex);
        style.setProperty("--md-sys-color-on-primary", on);
        style.setProperty("--md-sys-color-secondary", hex);
        style.setProperty("--md-sys-color-on-secondary", on);

        // Subtle tints (used for chips/pills/outline mix)
        // We rely on color-mix in CSS for backgrounds; contrast is enough here.

        if (persist) set("df_accent", hex);
      }

      // SEO
      const s = window.__siteSettings;
      document.title = s.seo.site_title;
      const metaDesc =
        document.querySelector('meta[name="description"]') ||
        (function () {
          const m = document.createElement("meta");
          m.name = "description";
          document.head.appendChild(m);
          return m;
        })();
      metaDesc.setAttribute("content", s.seo.site_description);

      // Initialize
      applyTheme(get("df_theme") || s.branding.theme_default);
      const initialAccent = get("df_accent") || s.branding.palette[0];
      applyAccent(initialAccent);

      // Expose API for your preset buttons
      window.DFTheme = {
        applyTheme,
        applyAccent,
        resetToDefaults() {
          localStorage.removeItem("df_theme");
          localStorage.removeItem("df_accent");
          applyTheme(s.branding.theme_default, true);
          applyAccent(s.branding.palette[0], true);
          window.location.reload();
        },
        palette: s.branding.palette
      };
    })();
  </script>

  <!-- Open Graph / Twitter -->
  <meta property="og:title" content="Daniel Forero â€” Web3/AI Marketing & PR" />
  <meta property="og:description" content="I turn Web3 ideas into real-world businessesâ€”and then make sure the world hears about them." />
  <meta property="og:image" content="https://picsum.photos/1200/630" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="theme-color" content="#ffffff" />

  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonts & icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet" />

  <!-- Base styles and theme tokens -->
  <link rel="stylesheet" href="/index.css" />
</head>
<body class="antialiased">
  <div id="root"></div>
  <!-- Single entry for Vite -->
  <script type="module" src="/index.tsx"></script>
</body>
</html>
