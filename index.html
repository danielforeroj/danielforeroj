<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <!-- Theme + site settings bootstrap -->
  <script>
    (function () {
      const set = (k, v) => localStorage.setItem(k, v);
      const get = (k) => localStorage.getItem(k);

      // Default LIGHT; DARK bg = #1b1c1e
      window.__siteSettings = {
        branding: {
          theme_default: "light",
          palette: ["#000000", "#f80301", "#00ff86", "#3786ec"]
        },
        seo: {
          site_title: "Daniel Forero — Web3/AI Marketing & PR",
          site_description:
            "I turn Web3 ideas into real-world businesses—and then make sure the world hears about them."
        }
      };

      const themeMeta =
        document.querySelector('meta[name="theme-color"]') ||
        (function () {
          const m = document.createElement("meta");
          m.name = "theme-color";
          document.head.appendChild(m);
          return m;
        })();

      function contrastText(hex) {
        const h = hex.replace("#", "");
        const n = h.length === 3 ? h.split("").map(c=>c+c).join("") : h;
        const num = parseInt(n, 16);
        const r = (num >> 16) & 255, g = (num >> 8) & 255, b = num & 255;
        const L = [r, g, b].map(v => {
          v /= 255;
          return v <= 0.03928 ? v/12.92 : Math.pow((v+0.055)/1.055, 2.4);
        });
        const lum = 0.2126*L[0] + 0.7152*L[1] + 0.0722*L[2];
        return lum > 0.5 ? "#000000" : "#ffffff";
      }

      function applyTheme(mode, persist = false) {
        const root = document.documentElement;
        root.classList.remove("light","dark");
        let finalMode = mode;
        if (mode === "system") {
          finalMode = matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
        }
        root.dataset.theme = finalMode;
        root.classList.add(finalMode);
        root.style.colorScheme = finalMode;

        // ✅ Light uses #f8f9fb; Dark uses #1b1c1e
        themeMeta.setAttribute("content", finalMode === "dark" ? "#1b1c1e" : "#f8f9fb");

        if (persist) set("df_theme", mode);
        if (mode === "system") {
          const mq = matchMedia("(prefers-color-scheme: dark)");
          if (!window.__dfSysListenerAttached) {
            mq.addEventListener("change", () => applyTheme("system"));
            window.__dfSysListenerAttached = true;
          }
        }
      }

      // SINGLE source of truth for accent
      function applyAccent(hex, persist = false) {
        const on = contrastText(hex);
        const s = document.documentElement.style;

        // Core accent + material-ish tokens
        s.setProperty("--accent", hex);
        s.setProperty("--accent-contrast", on);
        s.setProperty("--md-sys-color-primary", hex);
        s.setProperty("--md-sys-color-on-primary", on);
        s.setProperty("--md-sys-color-secondary", hex);
        s.setProperty("--md-sys-color-on-secondary", on);

        // Tailwind ring global fallback (for any focus rings)
        s.setProperty("--tw-ring-color", "color-mix(in srgb, " + hex + " 45%, transparent)");
        // Accent tints for chips/hover/outline
        s.setProperty("--df-accent-10", "color-mix(in srgb, " + hex + " 10%, transparent)");
        s.setProperty("--df-accent-30", "color-mix(in srgb, " + hex + " 30%, transparent)");

        if (persist) set("df_accent", hex);
      }

      // SEO
      const cfg = window.__siteSettings;
      document.title = cfg.seo.site_title;
      (document.querySelector('meta[name="description"]') || (() => {
        const m = document.createElement("meta"); m.name = "description"; document.head.appendChild(m); return m;
      })()).setAttribute("content", cfg.seo.site_description);

      // Init
      applyTheme(get("df_theme") || cfg.branding.theme_default);
      applyAccent(get("df_accent") || cfg.branding.palette[0]);

      // Expose to UI
      window.DFTheme = {
        applyTheme, applyAccent,
        resetToDefaults() {
          localStorage.removeItem("df_theme");
          localStorage.removeItem("df_accent");
          applyTheme(cfg.branding.theme_default, true);
          applyAccent(cfg.branding.palette[0], true);
          location.reload();
        },
        palette: cfg.branding.palette
      };
    })();
  </script>

  <!-- OG / Twitter -->
  <meta property="og:title" content="Daniel Forero — Web3/AI Marketing & PR" />
  <meta property="og:description" content="I turn Web3 ideas into real-world businesses—and then make sure the world hears about them." />
  <meta property="og:image" content="https://picsum.photos/1200/630" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="theme-color" content="#f8f9fb" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonts & icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet" />

  <!-- Base styles and theme tokens -->
  <link rel="stylesheet" href="/index.css" />
</head>
<body class="antialiased">
  <div id="root"></div>
  <!-- Single entry for Vite -->
  <script type="module" src="/index.tsx"></script>
</body>
</html>
